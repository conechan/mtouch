{"version":3,"file":"example.es.js","sources":["../../src/utils.js","../../src/handlerBus.js","../../src/index.js","../index.js"],"sourcesContent":["export default {\n    getLength(v1) {\n        if (typeof v1 !== 'object') {\n            console.error('getLength error!');\n            return;\n        }\n        return Math.sqrt(v1.x * v1.x + v1.y * v1.y);\n    },\n    getAngle(v1, v2) {\n        if (typeof v1 !== 'object' || typeof v2 !== 'object') {\n            console.error('getAngle error!');\n            return;\n        }\n        let direction = v1.x * v2.y - v2.x * v1.y > 0 ? 1: -1,\n            len1 = this.getLength(v1),\n            len2 = this.getLength(v2),\n            mr = len1 * len2,\n            dot,r;\n        if (mr === 0)return 0;\n        dot = v1.x * v2.x + v1.y * v2.y;\n        r = dot / mr;\n        if (r > 1)r = 1;\n        if (r < -1)r = -1;\n        return Math.acos(r) * direction * 180 / Math.PI;\n    },\n    getBasePoint(el) {\n        if (!el) {\n            console.error('getBasePoint error!');\n            return;\n        }\n        let offset = this.getOffset(el);\n        let x = offset.left + el.getBoundingClientRect().width / 2,\n            y = offset.top + el.getBoundingClientRect().width / 2;\n        return {x: Math.round(x), y: Math.round(y)};\n    },\n    setPos(el, transform) {\n        let str = JSON.stringify(transform);\n        let value = `translate3d(${transform.x}px,${transform.y}px,0px) scale(${transform.scale}) rotate(${transform.rotate}deg)`;\n        el = typeof el == 'string'? document.querySelector(el): el;\n        el.style.transform = value;\n        el.setAttribute('data-mtouch-status', str);\n    },\n    getPos(el) {\n        let defaulTrans;\n        let cssTrans = window.getComputedStyle(el,null).transform;\n        if(window.getComputedStyle && cssTrans !== 'none'){\n            defaulTrans = this.matrixTo(cssTrans);\n        }else{\n            defaulTrans = {\n                x: 0,\n                y: 0,\n                scale: 1,\n                rotate: 0,\n            };\n        }\n        return JSON.parse(el.getAttribute('data-mtouch-status')) || defaulTrans;\n    },\n    extend(obj1, obj2) {\n        for (let k in obj2) {\n            if (obj2.hasOwnProperty(k)) {\n                if(typeof obj2[k] == 'object'){\n                    if(typeof obj1[k] !== 'object'){\n                        obj1[k] = {};\n                    }\n                    this.extend(obj1[k],obj2[k]);\n                }else{\n                    obj1[k] = obj2[k];\n                }\n            }\n        }\n        return obj1;\n    },\n    getVector(p1, p2) {\n        if (typeof p1 !== 'object' || typeof p2 !== 'object' ) {\n            console.error('getvector error!');\n            return;\n        }\n        let x = Math.round(p1.x - p2.x),\n            y = Math.round(p1.y - p2.y);\n        return { x, y };\n    },\n    getPoint(ev, index) {\n        if (!ev || !ev.touches[index]) {\n            console.error('getPoint error!');\n            return;\n        }\n        return {\n            x: Math.round(ev.touches[index].pageX),\n            y: Math.round(ev.touches[index].pageY),\n        };\n    },\n    getOffset(el){\n        el = typeof el == 'string'? document.querySelector(el): el;\n        let rect = el.getBoundingClientRect();\n        let offset = {\n            left:rect.left + document.body.scrollLeft,\n            top:rect.top + document.body.scrollTop,\n            width:el.offsetWidth,\n            height:el.offsetHeight,\n        };\n        return offset;\n    },\n    matrixTo(matrix){\n        let arr = (matrix.replace('matrix(','').replace(')','')).split(',');\n        let cos = arr[0],\n            sin = arr[1],\n            tan = sin / cos,\n            rotate = Math.atan( tan ) * 180 / Math.PI,\n            scale = cos / ( Math.cos( Math.PI / 180 * rotate )),\n            trans;\n        trans = {\n            x:parseInt(arr[4]),\n            y:parseInt(arr[5]),\n            scale,\n            rotate,\n        };\n        return trans;\n    },\n    getUseName(evName){\n        let useName = evName.replace('start','');\n        let end = useName.indexOf('rotate') !== -1 ? 'nd' : 'end';\n        useName = useName.replace(end,'');\n        return useName;\n    },\n};\n","export default class HandlerBus{\n    constructor(el) {\n        this.handlers = [];\n        this.el = el;\n    }\n    add(handler){\n        this.handlers.push(handler);\n        return this;\n    }\n    del(handler){\n        if(!handler){\n            this.handlers = [];\n        }else{\n            this.handlers.forEach((value,index)=>{\n                if(value === handler){\n                    this.handlers.splice(index,1);\n                }\n            });\n        }\n        return this;\n    }\n    fire(){\n        if(!this.handlers || !this.handlers.length === 0)return;\n        this.handlers.forEach(handler=>{\n            if(typeof handler === 'function') handler.apply(this.el, arguments);\n        });\n        return this;\n    }\n}\n","import _ from './utils';\nimport HandlerBus from './handlerBus';\n\nconst EVENT = [\n    'touchstart',\n    'touchmove',\n    'touchend',\n    'drag',\n    'dragstart',\n    'dragend',\n    'pinch',\n    'pinchstart',\n    'pinchend',\n    'rotate',\n    'rotatestart',\n    'rotatend',\n];\n\nconst ORIGINEVENT = [\n    'touchstart',\n    'touchmove',\n    'touchend',\n    'touchcancel',\n];\n\nexport default function MTouch(config,operator){\n    // 兼容不使用 new 的方式；\n    if(!(this instanceof MTouch))return new MTouch(config,operator);\n\n    let options;\n    // options 多态；\n    if(typeof config === 'string'){\n        options = {};\n        options.receiver = config;\n        if(operator){\n            options.operator = operator;\n        }\n    }else if(typeof config === 'object'){\n        options = config;\n    }\n\n    this.ops = {\n        // config:\n        receiver: null,\n        operator: null,\n\n        // event\n        touchstart() {},\n        touchmove() {},\n        touchend() {},\n\n        drag() {},\n        dragstart() {},\n        dragend() {},\n\n        pinch() {},\n        pinchstart() {},\n        pinchend() {},\n\n        rotate() {},\n        rotatestart() {},\n        rotatend() {},\n\n        singlePinch:{\n            start(){},\n            pinch(){},\n            end(){},\n            buttonId:null,\n        },\n\n        singleRotate:{\n            start(){},\n            rotate(){},\n            end(){},\n            buttonId:null,\n        },\n    };\n\n    // 开关；\n    this.use = {\n        drag: !!options.drag || !!options.dragstart || !!options.dragend,\n        pinch: !!options.pinch || !!options.pinchstart || !!options.pinchend,\n        rotate: !!options.rotate || !!options.rotatestart || !!options.rotateend,\n        singlePinch: !!options.singlePinch && !!options.singlePinch.buttonId,\n        singleRotate: !!options.singleRotate && !!options.singleRotate.buttonId,\n    };\n\n    this.ops = _.extend(this.ops, options);\n\n    // receiver test;\n    if(!this.ops.receiver || typeof this.ops.receiver !== 'string'){\n        console.error('receiver error,there must be a receiver-selector');\n        return;\n    }\n    // 事件接收器；\n    this.receiver = document.querySelector(this.ops.receiver);\n\n    // 事件操纵器；\n    if (this.ops.operator) {\n        if(typeof this.ops.operator !== 'string'){\n            console.error('operator error, the operator param must be a selector');\n            return;\n        }\n        this.operator = document.querySelector(this.ops.operator);\n    } else {\n        this.operator = this.receiver;\n    }\n    // touch状态；\n    this.fingers = 0;\n    // 初始状态;\n    this.draging = this.pinching = this.rotating = this.singleRotating = this.singlePinching = false;\n\n    this.startScale = 1;\n    this.startPoint = {};\n    this.secondPoint = {};\n    this.pinchStartLength = null;\n    this.singlePinchStartLength = null;\n    this.vector1 = {};\n    this.singleBasePoint = {};\n    // eventbus\n    this.driveBus();\n    this.bind();\n}\n\nMTouch.prototype.driveBus = function(){\n    EVENT.forEach(eventName => {\n        this[eventName] = new HandlerBus(this.receiver).add(this.ops[eventName] || function(){});\n    });\n    this.singlePinchstart = new HandlerBus(this.receiver).add(this.ops.singlePinch.start || function(){});\n    this.singlePinch = new HandlerBus(this.receiver).add(this.ops.singlePinch.pinch || function(){});\n    this.singlePinchend = new HandlerBus(this.receiver).add(this.ops.singlePinch.end || function(){});\n    this.singleRotatestart = new HandlerBus(this.receiver).add(this.ops.singleRotate.start || function(){});\n    this.singleRotate = new HandlerBus(this.receiver).add(this.ops.singleRotate.rotate || function(){});\n    this.singleRotatend = new HandlerBus(this.receiver).add(this.ops.singleRotate.end || function(){});\n};\n\nMTouch.prototype.bind = function() {\n    ORIGINEVENT.forEach(evName => {\n        let fn = evName == 'touchcancel'? 'end': evName.replace('touch', '');\n        // 需要存下 bind(this) 后的函数指向，用于 destroy;\n        this[fn+'bind'] = this[fn].bind(this);\n        this.receiver.addEventListener(evName, this[fn+'bind'], false);\n    });\n};\nMTouch.prototype.destroy = function(){\n    ORIGINEVENT.forEach(evName => {\n        let fn = evName == 'touchcancel'? 'end': evName.replace('touch', '');\n        this.receiver.removeEventListener(evName, this[fn+'bind'], false);\n    });\n};\nMTouch.prototype.start = function(ev) {\n    if (!ev.touches || ev.type !== 'touchstart')return;\n\n    this.fingers = ev.touches.length;\n    this.startPoint = _.getPoint(ev, 0);\n    this.singleBasePoint = _.getBasePoint(this.operator);\n\n    if (this.fingers > 1) {\n        this.secondPoint = _.getPoint(ev, 1);\n        this.vector1 = _.getVector(this.secondPoint, this.startPoint);\n        this.pinchStartLength = _.getLength(this.vector1);\n    } else if (this.use.singlePinch) {\n        let pinchV1 = _.getVector(this.startPoint, this.singleBasePoint);\n        this.singlePinchStartLength = _.getLength(pinchV1);\n    }\n\n    this.touchstart.fire({\n        origin : ev,\n        eventType:'touchstart',\n    });\n};\nMTouch.prototype.move = function(ev) {\n    if (!ev.touches || ev.type !== 'touchmove')return;\n    let curPoint = _.getPoint(ev, 0);\n    let curFingers = ev.touches.length;\n    let rotateV1,\n        rotateV2,\n        pinchV2,\n        pinchLength,\n        singlePinchLength;\n\n    // 当从原先的两指到一指的时候，可能会出现基础手指的变化，导致跳动；\n    // 因此需屏蔽掉一次错误的touchmove事件，待重新设置基础指后，再继续进行；\n    if (curFingers < this.fingers) {\n        this.startPoint = curPoint;\n        this.fingers = curFingers;\n        return;\n    }\n\n    // 两指先后触摸时，只会触发第一指一次touchstart，第二指不会再次触发touchstart；\n    // 因此会出现没有记录第二指状态，需要在touchmove中重新获取参数；\n    if (curFingers > 1 && (!this.secondPoint || !this.vector1 || !this.pinchStartLength)) {\n        this.secondPoint = _.getPoint(ev, 1);\n        this.vector1 = _.getVector(this.secondPoint, this.startPoint);\n        this.pinchStartLength = _.getLength(this.vector1);\n    }\n\n    // 双指时，需触发pinch和rotate事件；\n    if (curFingers > 1) {\n        let curSecPoint = _.getPoint(ev, 1);\n        let vector2 = _.getVector(curSecPoint, curPoint);\n        // pinch\n        if (this.use.pinch) {\n            pinchLength = _.getLength(vector2);\n            this.eventFire('pinch', {\n                delta:{\n                    scale: pinchLength / this.pinchStartLength,\n                },\n                origin:ev,\n            });\n            this.pinchStartLength = pinchLength;\n        }\n        // rotate\n        if (this.use.rotate) {\n            this.eventFire('rotate', {\n                delta:{\n                    rotate: _.getAngle(this.vector1, vector2),\n                },\n                origin:ev,\n            });\n            this.vector1 = vector2;\n        }\n    } else {\n        // singlePinch;\n        if (this.use.singlePinch && ev.target.id == this.ops.singlePinch.buttonId) {\n            pinchV2 = _.getVector(curPoint, this.singleBasePoint);\n            singlePinchLength = _.getLength(pinchV2);\n            this.eventFire('singlePinch', {\n                delta:{\n                    scale: singlePinchLength / this.singlePinchStartLength,\n                },\n                origin:ev,\n            });\n            this.singlePinchStartLength = singlePinchLength;\n        }\n        // singleRotate;\n        if (this.use.singleRotate && ev.target.id == this.ops.singleRotate.buttonId) {\n            rotateV1 = _.getVector(this.startPoint, this.singleBasePoint);\n            rotateV2 = _.getVector(curPoint, this.singleBasePoint);\n            this.eventFire('singleRotate', {\n                delta:{\n                    rotate: _.getAngle(rotateV1, rotateV2),\n                },\n                origin:ev,\n            });\n        }\n    }\n    if (this.use.drag) {\n        if (ev.target.id !== this.ops.singlePinch.buttonId && ev.target.id !== this.ops.singleRotate.buttonId) {\n            this.eventFire('drag', {\n                delta:{\n                    deltaX: curPoint.x - this.startPoint.x,\n                    deltaY: curPoint.y - this.startPoint.y,\n                },\n                origin:ev,\n            });\n        }\n    }\n    this.startPoint = curPoint;\n    this.touchmove.fire({\n        eventType:'touchmove',\n        origin:ev,\n    });\n    ev.preventDefault();\n};\nMTouch.prototype.end = function(ev) {\n    if (!ev.touches && ev.type !== 'touchend' && ev.type !== 'touchcancel')\n        return;\n\n    ['pinch', 'drag', 'rotate', 'singleRotate', 'singlePinch'].forEach(evName => {\n        this.eventEnd(evName, {\n            origin:ev,\n        });\n    });\n    this.touchend.fire({\n        eventType:'touchend',\n        origin:ev,\n    });\n};\nMTouch.prototype.eventFire = function(evName, ev) {\n    let ing = `${evName}ing`;\n    let start = `${evName}start`;\n    if (!this[ing]) {\n        ev.eventType = start;\n        this[start].fire(ev);\n        this[ing] = true;\n    } else {\n        ev.eventType = evName;\n        this[evName].fire(ev);\n    }\n};\nMTouch.prototype.eventEnd = function(evName, ev) {\n    let ing = `${evName}ing`;\n    let end;\n    if (evName == 'rotate' || evName == 'singleRotate') {\n        end = `${evName}nd`;\n    } else {\n        end = `${evName}end`;\n    }\n    if (this[ing]) {\n        ev.eventType = end;\n        this[end].fire(ev);\n        this[ing] = false;\n    }\n};\nMTouch.prototype.switchOperator = function(el) {\n    this.operator = el;\n};\nMTouch.prototype.on = function(evName, handler) {\n    this.use[ _.getUseName(evName) ] = true;\n    this[evName].add(handler);\n};\nMTouch.prototype.off = function(evName, handler) {\n    this[evName].del(handler);\n};\n","import MTouch from '../src/index';\n\nwindow.requestAnimFrame = (function() {\n    return window.requestAnimationFrame || window.webkitRequestAnimationFrame || function(callback) {\n        window.setTimeout(callback, 1000 / 60);\n    };\n})();\n\n// drag;\nlet dragTrans = {\n    x:0,\n    y:0,\n    scale:1,\n    rotate:0,\n};\nlet $drag = $('.js-drag-el');\nlet wrap = document.querySelector('.js-area');\nlet wrapRect = wrap.getBoundingClientRect();\nlet elRect = $drag[0].getBoundingClientRect();\n// new MTouch({\n//     receiver:'.js-drag-el',\n//     drag(ev){\n//         dragTrans.x += ev.delta.deltaX;\n//         dragTrans.y += ev.delta.deltaY;\n//         set($drag,limit(wrap,$drag[0],dragTrans));\n//     },\n// });\nMTouch('.js-area').on('drag',(ev)=>{\n    dragTrans.x += ev.delta.deltaX;\n    dragTrans.y += ev.delta.deltaY;\n    set($drag,limit(wrap,$drag[0],dragTrans));\n});\n// console.log(touch);\n\nfunction limit(wrap,el,trans){\n    let bounce = 40;\n    let minX = - el.offsetLeft - bounce;\n    let maxX =  wrapRect.width - el.offsetLeft - elRect.width + bounce;\n    let minY = - el.offsetTop - bounce;\n    let maxY =  wrapRect.height - el.offsetTop - elRect.height + bounce;\n    trans.x = trans.x < minX ? minX : trans.x;\n    trans.x = trans.x > maxX ? maxX : trans.x;\n    trans.y = trans.y < minY ? minY : trans.y;\n    trans.y = trans.y > maxY ? maxY : trans.y;\n    return trans;\n}\n\n// pinch;\nlet pinchTrans = {\n    x:0,\n    y:0,\n    scale:1,\n    rotate:0,\n};\nlet $pinch = $('.js-pinch-el');\nnew MTouch({\n    receiver:'.js-pinch-el',\n    pinch(ev){\n        pinchTrans.scale *= ev.delta.scale;\n        set($pinch,pinchTrans);\n    },\n});\n\n// rotate;\nlet rotateTrans = {\n    x:0,\n    y:0,\n    scale:1,\n    rotate:0,\n};\nlet $rotate = $('.js-rotate-el');\nnew MTouch({\n    receiver:'.js-rotate-el',\n    rotate(ev){\n        rotateTrans.rotate += ev.delta.rotate;\n        set($rotate,rotateTrans);\n    },\n});\n// singlePinch;\nlet singlePinchTrans = {\n    x:0,\n    y:0,\n    scale:1,\n    rotate:0,\n};\nlet $singlePinch = $('.js-singlePinch-el');\nnew MTouch({\n    receiver:'.js-singlePinch-el',\n    singlePinch:{\n        pinch(ev){\n            singlePinchTrans.scale *= ev.delta.scale;\n            set($singlePinch,singlePinchTrans);\n        },\n        buttonId:'js-singlePinch',\n    },\n});\n\n// singleRotate;\nlet singleRotateTrans = {\n    x:0,\n    y:0,\n    scale:1,\n    rotate:0,\n};\nlet $singleRotate = $('.js-singleRotate-el');\nnew MTouch({\n    receiver:'.js-singleRotate-el',\n    singleRotate:{\n        rotate(ev){\n            singleRotateTrans.rotate += ev.delta.rotate;\n            set($singleRotate,singleRotateTrans);\n        },\n        buttonId:'js-singleRotate',\n    },\n});\n\nfunction set($el,transform){\n    window.requestAnimFrame(()=>{\n        $el.css('transform',`translate3d(${transform.x}px,${transform.y}px,0px) rotate(${transform.rotate}deg) scale(${transform.scale})`);\n    });\n}\n"],"names":["v1","error","Math","sqrt","x","y","v2","direction","len1","getLength","len2","mr","dot","r","acos","PI","el","offset","getOffset","left","getBoundingClientRect","width","top","round","transform","str","JSON","stringify","value","scale","rotate","document","querySelector","style","setAttribute","defaulTrans","cssTrans","window","getComputedStyle","matrixTo","parse","getAttribute","obj1","obj2","k","hasOwnProperty","_typeof","extend","p1","p2","ev","index","touches","pageX","pageY","rect","body","scrollLeft","scrollTop","offsetWidth","offsetHeight","matrix","arr","replace","split","cos","sin","tan","atan","trans","parseInt","evName","useName","end","indexOf","HandlerBus","handlers","handler","push","forEach","splice","length","apply","EVENT","ORIGINEVENT","MTouch","config","operator","options","receiver","ops","use","drag","dragstart","dragend","pinch","pinchstart","pinchend","rotatestart","rotateend","singlePinch","buttonId","singleRotate","_","fingers","draging","pinching","rotating","singleRotating","singlePinching","startScale","startPoint","secondPoint","pinchStartLength","singlePinchStartLength","vector1","singleBasePoint","driveBus","bind","prototype","eventName","add","singlePinchstart","start","singlePinchend","singleRotatestart","singleRotatend","fn","addEventListener","destroy","removeEventListener","type","getPoint","getBasePoint","getVector","pinchV1","touchstart","fire","move","curPoint","curFingers","rotateV1","rotateV2","pinchV2","pinchLength","singlePinchLength","curSecPoint","vector2","eventFire","getAngle","target","id","touchmove","preventDefault","eventEnd","touchend","ing","eventType","switchOperator","on","getUseName","off","del","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","callback","setTimeout","dragTrans","$drag","$","wrap","wrapRect","elRect","delta","deltaX","deltaY","limit","bounce","minX","offsetLeft","maxX","minY","offsetTop","maxY","height","pinchTrans","$pinch","rotateTrans","$rotate","singlePinchTrans","$singlePinch","singleRotateTrans","$singleRotate","set","$el","css"],"mappings":"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"}