{"version":3,"file":"example.es.js","sources":["../../src/utils.js","../../src/handlerBus.js","../../src/index.js","../index.js"],"sourcesContent":["export default {\n    getLength(v1) {\n        if (typeof v1 !== 'object') {\n            console.error('getLength error!');\n            return;\n        }\n        return Math.sqrt(v1.x * v1.x + v1.y * v1.y);\n    },\n    getAngle(v1, v2) {\n        if (typeof v1 !== 'object' || typeof v2 !== 'object') {\n            console.error('getAngle error!');\n            return;\n        }\n        let direction = v1.x * v2.y - v2.x * v1.y > 0 ? 1: -1,\n            len1 = this.getLength(v1),\n            len2 = this.getLength(v2),\n            mr = len1 * len2,\n            dot,r;\n        if (mr === 0)return 0;\n        dot = v1.x * v2.x + v1.y * v2.y;\n        r = dot / mr;\n        if (r > 1)r = 1;\n        if (r < -1)r = -1;\n        return Math.acos(r) * direction * 180 / Math.PI;\n    },\n    getBasePoint(el) {\n        if (!el) {\n            console.error('getBasePoint error!');\n            return;\n        }\n        let offset = this.getOffset(el);\n        let x = offset.left + el.getBoundingClientRect().width / 2,\n            y = offset.top + el.getBoundingClientRect().width / 2;\n        return {x: Math.round(x), y: Math.round(y)};\n    },\n    setPos(el, transform) {\n        let str = JSON.stringify(transform);\n        let value = `translate3d(${transform.x}px,${transform.y}px,0px) scale(${transform.scale}) rotate(${transform.rotate}deg)`;\n        el = typeof el == 'string'? document.querySelector(el): el;\n        el.style.transform = value;\n        el.setAttribute('data-mtouch-status', str);\n    },\n    getPos(el) {\n        let defaulTrans;\n        let cssTrans = window.getComputedStyle(el,null).transform;\n        if(window.getComputedStyle && cssTrans !== 'none'){\n            defaulTrans = this.matrixTo(cssTrans);\n        }else{\n            defaulTrans = {\n                x: 0,\n                y: 0,\n                scale: 1,\n                rotate: 0,\n            };\n        }\n        return JSON.parse(el.getAttribute('data-mtouch-status')) || defaulTrans;\n    },\n    extend(obj1, obj2) {\n        for (let k in obj2) {\n            if (obj2.hasOwnProperty(k)) {\n                if(typeof obj2[k] == 'object'){\n                    if(typeof obj1[k] !== 'object'){\n                        obj1[k] = {};\n                    }\n                    this.extend(obj1[k],obj2[k]);\n                }else{\n                    obj1[k] = obj2[k];\n                }\n            }\n        }\n        return obj1;\n    },\n    getVector(p1, p2) {\n        if (typeof p1 !== 'object' || typeof p2 !== 'object' ) {\n            console.error('getvector error!');\n            return;\n        }\n        let x = Math.round(p1.x - p2.x),\n            y = Math.round(p1.y - p2.y);\n        return { x, y };\n    },\n    getPoint(ev, index) {\n        if (!ev || !ev.touches[index]) {\n            console.error('getPoint error!');\n            return;\n        }\n        return {\n            x: Math.round(ev.touches[index].pageX),\n            y: Math.round(ev.touches[index].pageY),\n        };\n    },\n    getOffset(el){\n        el = typeof el == 'string'? document.querySelector(el): el;\n        let rect = el.getBoundingClientRect();\n        let offset = {\n            left:rect.left + document.body.scrollLeft,\n            top:rect.top + document.body.scrollTop,\n            width:el.offsetWidth,\n            height:el.offsetHeight,\n        };\n        return offset;\n    },\n    matrixTo(matrix){\n        let arr = (matrix.replace('matrix(','').replace(')','')).split(',');\n        let cos = arr[0],\n            sin = arr[1],\n            tan = sin / cos,\n            rotate = Math.atan( tan ) * 180 / Math.PI,\n            scale = cos / ( Math.cos( Math.PI / 180 * rotate )),\n            trans;\n        trans = {\n            x:parseInt(arr[4]),\n            y:parseInt(arr[5]),\n            scale,\n            rotate,\n        };\n        return trans;\n    },\n};\n","export default class HandlerBus{\n    constructor(el) {\n        this.handlers = [];\n        this.el = el;\n    };\n    add(handler){\n        this.handlers.push(handler);\n        return this;\n    };\n    del(handler){\n        if(!handler){\n            this.handlers = [];\n        }else{\n            this.handlers.forEach((value,index)=>{\n                if(value === handler){\n                    this.handlers.splice(index,1);\n                }\n            });\n        }\n        return this;\n    };\n    fire(){\n        if(!this.handlers || !this.handlers.length === 0)return;\n        this.handlers.forEach(handler=>{\n            if(typeof handler === 'function') handler.apply(this.el, arguments);\n        })\n        return this;\n    };\n}\n","import _ from './utils';\nimport HandlerBus from './handlerBus';\n\nconst EVENT = [\n    'touchstart',\n    'touchmove',\n    'touchend',\n    'drag',\n    'dragstart',\n    'dragend',\n    'pinch',\n    'pinchstart',\n    'pinchend',\n    'rotate',\n    'rotatestart',\n    'rotatend',\n];\n\nconst ORIGINEVENT = [\n    'touchstart',\n    'touchmove',\n    'touchend',\n    'touchcancel',\n];\n\nexport default class MTouch {\n    constructor(options) {\n        this.ops = {\n            // config:\n            receiver: null,\n            operator: null,\n\n            // event\n            touchstart() {},\n            touchmove() {},\n            touchend() {},\n\n            drag() {},\n            dragstart() {},\n            dragend() {},\n\n            pinch() {},\n            pinchstart() {},\n            pinchend() {},\n\n            rotate() {},\n            rotatestart() {},\n            rotatend() {},\n\n            singlePinch:{\n                start(){},\n                pinch(){},\n                end(){},\n                buttonId:null,\n            },\n\n            singleRotate:{\n                start(){},\n                rotate(){},\n                end(){},\n                buttonId:null,\n            },\n        };\n\n        // 开关；\n        this.use = {\n            drag: !!options.drag || !!options.dragstart || !!options.dragend,\n            pinch: !!options.pinch || !!options.pinchstart || !!options.pinchend,\n            rotate: !!options.rotate || !!options.rotatestart || !!options.rotateend,\n            singlePinch: !!options.singlePinch && !!options.singlePinch.buttonId,\n            singleRotate: !!options.singleRotate && !!options.singleRotate.buttonId,\n        };\n\n        this.ops = _.extend(this.ops, options);\n\n        // receiver test;\n        if(!this.ops.receiver || typeof this.ops.receiver !== 'string'){\n            console.error('receiver error,there must be a receiver-selector');\n            return;\n        }\n        // 事件接收器；\n        this.receiver = document.querySelector(this.ops.receiver);\n\n        // 事件操纵器；\n        if (this.ops.operator) {\n            if(typeof this.ops.operator !== 'string'){\n                console.error('operator error, the operator param must be a selector');\n                return;\n            }\n            this.operator = document.querySelector(this.ops.operator);\n        } else {\n            this.operator = this.receiver;\n        }\n\n\n        // touch状态；\n        this.fingers = 0;\n        // 初始状态;\n        this.draging = this.pinching = this.rotating = this.singleRotating = this.singlePinching = false;\n\n        this.startScale = 1;\n        this.startPoint = {};\n        this.secondPoint = {};\n        this.pinchStartLength = null;\n        this.singlePinchStartLength = null;\n        this.vector1 = {};\n        this.singleBasePoint = {};\n        // eventbus\n        this.driveBus();\n        this.bind();\n    }\n    driveBus() {\n        EVENT.forEach(eventName => {\n            this[eventName] = new HandlerBus(this.receiver).add(this.ops[eventName] || function(){});\n        });\n        this.singlePinchstart = new HandlerBus(this.receiver).add(this.ops.singlePinch.start || function(){});\n        this.singlePinch = new HandlerBus(this.receiver).add(this.ops.singlePinch.pinch || function(){});\n        this.singlePinchend = new HandlerBus(this.receiver).add(this.ops.singlePinch.end || function(){});\n        this.singleRotatestart = new HandlerBus(this.receiver).add(this.ops.singleRotate.start || function(){});\n        this.singleRotate = new HandlerBus(this.receiver).add(this.ops.singleRotate.rotate || function(){});\n        this.singleRotatend = new HandlerBus(this.receiver).add(this.ops.singleRotate.end || function(){});\n    }\n    bind() {\n        ORIGINEVENT.forEach(evName => {\n            let fn = evName == 'touchcancel'? 'end': evName.replace('touch', '');\n            // 需要存下 bind(this) 后的函数指向，用于 destroy;\n            this[fn+'bind'] = this[fn].bind(this);\n            this.receiver.addEventListener(evName, this[fn+'bind'], false);\n        });\n    }\n    destroy(){\n        ORIGINEVENT.forEach(evName => {\n            let fn = evName == 'touchcancel'? 'end': evName.replace('touch', '');\n            this.receiver.removeEventListener(evName, this[fn+'bind'], false);\n        });\n    }\n    start(ev) {\n        if (!ev.touches || ev.type !== 'touchstart')return;\n\n        this.fingers = ev.touches.length;\n        this.startPoint = _.getPoint(ev, 0);\n        this.singleBasePoint = _.getBasePoint(this.operator);\n\n        if (this.fingers > 1) {\n            this.secondPoint = _.getPoint(ev, 1);\n            this.vector1 = _.getVector(this.secondPoint, this.startPoint);\n            this.pinchStartLength = _.getLength(this.vector1);\n        } else if (this.use.singlePinch) {\n            let pinchV1 = _.getVector(this.startPoint, this.singleBasePoint);\n            this.singlePinchStartLength = _.getLength(pinchV1);\n        }\n\n        this.touchstart.fire({\n            origin : ev,\n            eventType:'touchstart',\n        });\n    }\n    move(ev) {\n        if (!ev.touches || ev.type !== 'touchmove')return;\n        let curPoint = _.getPoint(ev, 0);\n        let curFingers = ev.touches.length;\n        let rotateV1,\n            rotateV2,\n            pinchV2,\n            pinchLength,\n            singlePinchLength;\n\n        // 当从原先的两指到一指的时候，可能会出现基础手指的变化，导致跳动；\n        // 因此需屏蔽掉一次错误的touchmove事件，待重新设置基础指后，再继续进行；\n        if (curFingers < this.fingers) {\n            this.startPoint = curPoint;\n            this.fingers = curFingers;\n            return;\n        }\n\n        // 两指先后触摸时，只会触发第一指一次touchstart，第二指不会再次触发touchstart；\n        // 因此会出现没有记录第二指状态，需要在touchmove中重新获取参数；\n        if (curFingers > 1 && (!this.secondPoint || !this.vector1 || !this.pinchStartLength)) {\n            this.secondPoint = _.getPoint(ev, 1);\n            this.vector1 = _.getVector(this.secondPoint, this.startPoint);\n            this.pinchStartLength = _.getLength(this.vector1);\n        }\n\n        // 双指时，需触发pinch和rotate事件；\n        if (curFingers > 1) {\n            let curSecPoint = _.getPoint(ev, 1);\n            let vector2 = _.getVector(curSecPoint, curPoint);\n            // pinch\n            if (this.use.pinch) {\n                pinchLength = _.getLength(vector2);\n                this.eventFire('pinch', {\n                    delta:{\n                        scale: pinchLength / this.pinchStartLength,\n                    },\n                    origin:ev,\n                });\n                this.pinchStartLength = pinchLength;\n            }\n            // rotate\n            if (this.use.rotate) {\n                this.eventFire('rotate', {\n                    delta:{\n                        rotate: _.getAngle(this.vector1, vector2),\n                    },\n                    origin:ev,\n                });\n                this.vector1 = vector2;\n            }\n        } else {\n            // singlePinch;\n            if (this.use.singlePinch && ev.target.id == this.ops.singlePinch.buttonId) {\n                pinchV2 = _.getVector(curPoint, this.singleBasePoint);\n                singlePinchLength = _.getLength(pinchV2);\n                this.eventFire('singlePinch', {\n                    delta:{\n                        scale: singlePinchLength / this.singlePinchStartLength,\n                    },\n                    origin:ev,\n                });\n                this.singlePinchStartLength = singlePinchLength;\n            }\n            // singleRotate;\n            if (this.use.singleRotate && ev.target.id == this.ops.singleRotate.buttonId) {\n                rotateV1 = _.getVector(this.startPoint, this.singleBasePoint);\n                rotateV2 = _.getVector(curPoint, this.singleBasePoint);\n                this.eventFire('singleRotate', {\n                    delta:{\n                        rotate: _.getAngle(rotateV1, rotateV2),\n                    },\n                    origin:ev,\n                });\n            }\n        }\n        if (this.use.drag) {\n            if (ev.target.id !== this.ops.singlePinch.buttonId && ev.target.id !== this.ops.singleRotate.buttonId) {\n                this.eventFire('drag', {\n                    delta:{\n                        deltaX: curPoint.x - this.startPoint.x,\n                        deltaY: curPoint.y - this.startPoint.y,\n                    },\n                    origin:ev,\n                });\n            }\n        }\n        this.startPoint = curPoint;\n        this.touchmove.fire({\n            eventType:'touchmove',\n            origin:ev,\n        });\n        ev.preventDefault();\n    }\n    end(ev) {\n        if (!ev.touches && ev.type !== 'touchend' && ev.type !== 'touchcancel')\n            return;\n\n        ['pinch', 'drag', 'rotate', 'singleRotate', 'singlePinch'].forEach(evName => {\n            this.eventEnd(evName, {\n                origin:ev,\n            });\n        });\n        this.touchend.fire({\n            eventType:'touchend',\n            origin:ev,\n        });\n    }\n    eventFire(evName, ev) {\n        let ing = `${evName}ing`;\n        let start = `${evName}start`;\n        if (!this[ing]) {\n            ev.eventType = start;\n            this[start].fire(ev);\n            this[ing] = true;\n        } else {\n            ev.eventType = evName;\n            this[evName].fire(ev);\n        }\n    }\n    eventEnd(evName, ev) {\n        let ing = `${evName}ing`;\n        let end;\n        if (evName == 'rotate' || evName == 'singleRotate') {\n            end = `${evName}nd`;\n        } else {\n            end = `${evName}end`;\n        }\n        if (this[ing]) {\n            ev.eventType = end;\n            this[end].fire(ev);\n            this[ing] = false;\n        }\n    }\n    switchOperator(el) {\n        this.operator = el;\n    }\n    on(evName, handler) {\n        this[evName] && this[evName].add(handler);\n    }\n    off(evName, handler) {\n        this[evName] && this[evName].del(handler);\n    }\n}\n","import MTouch from '../src/index';\n\nwindow.requestAnimFrame = (function() {\n    return window.requestAnimationFrame || window.webkitRequestAnimationFrame || function(callback) {\n        window.setTimeout(callback, 1000 / 60);\n    };\n})();\n\n// drag;\nlet dragTrans = {\n    x:0,\n    y:0,\n    scale:1,\n    rotate:0,\n};\nlet $drag = $('.js-drag-el');\nlet wrap = document.querySelector('.js-area');\nlet wrapRect = wrap.getBoundingClientRect();\nlet elRect = $drag[0].getBoundingClientRect();\nnew MTouch({\n    receiver:'.js-drag-el',\n    drag(ev){\n        dragTrans.x += ev.delta.deltaX;\n        dragTrans.y += ev.delta.deltaY;\n        set($drag,limit(wrap,$drag[0],dragTrans));\n    },\n});\nfunction limit(wrap,el,trans){\n    let bounce = 40;\n    let minX = - el.offsetLeft - bounce;\n    let maxX =  wrapRect.width - el.offsetLeft - elRect.width + bounce;\n    let minY = - el.offsetTop - bounce;\n    let maxY =  wrapRect.height - el.offsetTop - elRect.height + bounce;\n    trans.x = trans.x < minX ? minX : trans.x;\n    trans.x = trans.x > maxX ? maxX : trans.x;\n    trans.y = trans.y < minY ? minY : trans.y;\n    trans.y = trans.y > maxY ? maxY : trans.y;\n    return trans;\n}\n\n// pinch;\nlet pinchTrans = {\n    x:0,\n    y:0,\n    scale:1,\n    rotate:0,\n};\nlet $pinch = $('.js-pinch-el');\nnew MTouch({\n    receiver:'.js-pinch-el',\n    pinch(ev){\n        pinchTrans.scale *= ev.delta.scale;\n        set($pinch,pinchTrans);\n    },\n});\n\n// rotate;\nlet rotateTrans = {\n    x:0,\n    y:0,\n    scale:1,\n    rotate:0,\n};\nlet $rotate = $('.js-rotate-el');\nnew MTouch({\n    receiver:'.js-rotate-el',\n    rotate(ev){\n        rotateTrans.rotate += ev.delta.rotate;\n        set($rotate,rotateTrans);\n    },\n});\n\n// singlePinch;\nlet singlePinchTrans = {\n    x:0,\n    y:0,\n    scale:1,\n    rotate:0,\n};\nlet $singlePinch = $('.js-singlePinch-el');\nnew MTouch({\n    receiver:'.js-singlePinch-el',\n    singlePinch:{\n        pinch(ev){\n            singlePinchTrans.scale *= ev.delta.scale;\n            set($singlePinch,singlePinchTrans);\n        },\n        buttonId:'js-singlePinch',\n    },\n});\n\n// singleRotate;\nlet singleRotateTrans = {\n    x:0,\n    y:0,\n    scale:1,\n    rotate:0,\n};\nlet $singleRotate = $('.js-singleRotate-el');\nnew MTouch({\n    receiver:'.js-singleRotate-el',\n    singleRotate:{\n        rotate(ev){\n            singleRotateTrans.rotate += ev.delta.rotate;\n            set($singleRotate,singleRotateTrans);\n        },\n        buttonId:'js-singleRotate',\n    },\n});\n\nfunction set($el,transform){\n    window.requestAnimFrame(()=>{\n        $el.css('transform',`translate3d(${transform.x}px,${transform.y}px,0px) rotate(${transform.rotate}deg) scale(${transform.scale})`);\n    });\n}\n"],"names":["v1","error","Math","sqrt","x","y","v2","direction","len1","getLength","len2","mr","dot","r","acos","PI","el","offset","getOffset","left","getBoundingClientRect","width","top","round","transform","str","JSON","stringify","value","scale","rotate","document","querySelector","style","setAttribute","defaulTrans","cssTrans","window","getComputedStyle","matrixTo","parse","getAttribute","obj1","obj2","k","hasOwnProperty","extend","p1","p2","ev","index","touches","pageX","pageY","rect","body","scrollLeft","scrollTop","offsetWidth","offsetHeight","matrix","arr","replace","split","cos","sin","tan","atan","trans","parseInt","HandlerBus","handlers","handler","push","forEach","splice","length","apply","EVENT","ORIGINEVENT","MTouch","options","ops","use","drag","dragstart","dragend","pinch","pinchstart","pinchend","rotatestart","rotateend","singlePinch","buttonId","singleRotate","_","receiver","operator","fingers","draging","pinching","rotating","singleRotating","singlePinching","startScale","startPoint","secondPoint","pinchStartLength","singlePinchStartLength","vector1","singleBasePoint","driveBus","bind","eventName","add","singlePinchstart","start","singlePinchend","end","singleRotatestart","singleRotatend","fn","evName","addEventListener","removeEventListener","type","getPoint","getBasePoint","getVector","pinchV1","touchstart","fire","curPoint","curFingers","rotateV1","rotateV2","pinchV2","pinchLength","singlePinchLength","curSecPoint","vector2","eventFire","getAngle","target","id","touchmove","preventDefault","eventEnd","touchend","ing","eventType","del","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","callback","setTimeout","dragTrans","$drag","$","wrap","wrapRect","elRect","delta","deltaX","deltaY","limit","bounce","minX","offsetLeft","maxX","minY","offsetTop","maxY","height","pinchTrans","$pinch","rotateTrans","$rotate","singlePinchTrans","$singlePinch","singleRotateTrans","$singleRotate","set","$el","css"],"mappings":";;AAAA,QAAe;aAAA,qBACDA,EADC,EACG;YACN,QAAOA,EAAP,yCAAOA,EAAP,OAAc,QAAlB,EAA4B;oBAChBC,KAAR,CAAc,kBAAd;;;eAGGC,KAAKC,IAAL,CAAUH,GAAGI,CAAH,GAAOJ,GAAGI,CAAV,GAAcJ,GAAGK,CAAH,GAAOL,GAAGK,CAAlC,CAAP;KANO;YAAA,oBAQFL,EARE,EAQEM,EARF,EAQM;YACT,QAAON,EAAP,yCAAOA,EAAP,OAAc,QAAd,IAA0B,QAAOM,EAAP,yCAAOA,EAAP,OAAc,QAA5C,EAAsD;oBAC1CL,KAAR,CAAc,iBAAd;;;YAGAM,YAAYP,GAAGI,CAAH,GAAOE,GAAGD,CAAV,GAAcC,GAAGF,CAAH,GAAOJ,GAAGK,CAAxB,GAA4B,CAA5B,GAAgC,CAAhC,GAAmC,CAAC,CAApD;YACIG,OAAO,KAAKC,SAAL,CAAeT,EAAf,CADX;YAEIU,OAAO,KAAKD,SAAL,CAAeH,EAAf,CAFX;YAGIK,KAAKH,OAAOE,IAHhB;YAIIE,YAJJ;YAIQC,UAJR;YAKIF,OAAO,CAAX,EAAa,OAAO,CAAP;cACPX,GAAGI,CAAH,GAAOE,GAAGF,CAAV,GAAcJ,GAAGK,CAAH,GAAOC,GAAGD,CAA9B;YACIO,MAAMD,EAAV;YACIE,IAAI,CAAR,EAAUA,IAAI,CAAJ;YACNA,IAAI,CAAC,CAAT,EAAWA,IAAI,CAAC,CAAL;eACJX,KAAKY,IAAL,CAAUD,CAAV,IAAeN,SAAf,GAA2B,GAA3B,GAAiCL,KAAKa,EAA7C;KAvBO;gBAAA,wBAyBEC,EAzBF,EAyBM;YACT,CAACA,EAAL,EAAS;oBACGf,KAAR,CAAc,qBAAd;;;YAGAgB,SAAS,KAAKC,SAAL,CAAeF,EAAf,CAAb;YACIZ,IAAIa,OAAOE,IAAP,GAAcH,GAAGI,qBAAH,GAA2BC,KAA3B,GAAmC,CAAzD;YACIhB,IAAIY,OAAOK,GAAP,GAAaN,GAAGI,qBAAH,GAA2BC,KAA3B,GAAmC,CADxD;eAEO,EAACjB,GAAGF,KAAKqB,KAAL,CAAWnB,CAAX,CAAJ,EAAmBC,GAAGH,KAAKqB,KAAL,CAAWlB,CAAX,CAAtB,EAAP;KAjCO;UAAA,kBAmCJW,EAnCI,EAmCAQ,SAnCA,EAmCW;YACdC,MAAMC,KAAKC,SAAL,CAAeH,SAAf,CAAV;YACII,yBAAuBJ,UAAUpB,CAAjC,WAAwCoB,UAAUnB,CAAlD,sBAAoEmB,UAAUK,KAA9E,iBAA+FL,UAAUM,MAAzG,SAAJ;aACK,OAAOd,EAAP,IAAa,QAAb,GAAuBe,SAASC,aAAT,CAAuBhB,EAAvB,CAAvB,GAAmDA,EAAxD;WACGiB,KAAH,CAAST,SAAT,GAAqBI,KAArB;WACGM,YAAH,CAAgB,oBAAhB,EAAsCT,GAAtC;KAxCO;UAAA,kBA0CJT,EA1CI,EA0CA;YACHmB,oBAAJ;YACIC,WAAWC,OAAOC,gBAAP,CAAwBtB,EAAxB,EAA2B,IAA3B,EAAiCQ,SAAhD;YACGa,OAAOC,gBAAP,IAA2BF,aAAa,MAA3C,EAAkD;0BAChC,KAAKG,QAAL,CAAcH,QAAd,CAAd;SADJ,MAEK;0BACa;mBACP,CADO;mBAEP,CAFO;uBAGH,CAHG;wBAIF;aAJZ;;eAOGV,KAAKc,KAAL,CAAWxB,GAAGyB,YAAH,CAAgB,oBAAhB,CAAX,KAAqDN,WAA5D;KAvDO;UAAA,kBAyDJO,IAzDI,EAyDEC,IAzDF,EAyDQ;aACV,IAAIC,CAAT,IAAcD,IAAd,EAAoB;gBACZA,KAAKE,cAAL,CAAoBD,CAApB,CAAJ,EAA4B;oBACrB,QAAOD,KAAKC,CAAL,CAAP,KAAkB,QAArB,EAA8B;wBACvB,QAAOF,KAAKE,CAAL,CAAP,MAAmB,QAAtB,EAA+B;6BACtBA,CAAL,IAAU,EAAV;;yBAECE,MAAL,CAAYJ,KAAKE,CAAL,CAAZ,EAAoBD,KAAKC,CAAL,CAApB;iBAJJ,MAKK;yBACIA,CAAL,IAAUD,KAAKC,CAAL,CAAV;;;;eAILF,IAAP;KAtEO;aAAA,qBAwEDK,EAxEC,EAwEGC,EAxEH,EAwEO;YACV,QAAOD,EAAP,yCAAOA,EAAP,OAAc,QAAd,IAA0B,QAAOC,EAAP,yCAAOA,EAAP,OAAc,QAA5C,EAAuD;oBAC3C/C,KAAR,CAAc,kBAAd;;;YAGAG,IAAIF,KAAKqB,KAAL,CAAWwB,GAAG3C,CAAH,GAAO4C,GAAG5C,CAArB,CAAR;YACIC,IAAIH,KAAKqB,KAAL,CAAWwB,GAAG1C,CAAH,GAAO2C,GAAG3C,CAArB,CADR;eAEO,EAAED,IAAF,EAAKC,IAAL,EAAP;KA/EO;YAAA,oBAiFF4C,EAjFE,EAiFEC,KAjFF,EAiFS;YACZ,CAACD,EAAD,IAAO,CAACA,GAAGE,OAAH,CAAWD,KAAX,CAAZ,EAA+B;oBACnBjD,KAAR,CAAc,iBAAd;;;eAGG;eACAC,KAAKqB,KAAL,CAAW0B,GAAGE,OAAH,CAAWD,KAAX,EAAkBE,KAA7B,CADA;eAEAlD,KAAKqB,KAAL,CAAW0B,GAAGE,OAAH,CAAWD,KAAX,EAAkBG,KAA7B;SAFP;KAtFO;aAAA,qBA2FDrC,EA3FC,EA2FE;aACJ,OAAOA,EAAP,IAAa,QAAb,GAAuBe,SAASC,aAAT,CAAuBhB,EAAvB,CAAvB,GAAmDA,EAAxD;YACIsC,OAAOtC,GAAGI,qBAAH,EAAX;YACIH,SAAS;kBACJqC,KAAKnC,IAAL,GAAYY,SAASwB,IAAT,CAAcC,UADtB;iBAELF,KAAKhC,GAAL,GAAWS,SAASwB,IAAT,CAAcE,SAFpB;mBAGHzC,GAAG0C,WAHA;oBAIF1C,GAAG2C;SAJd;eAMO1C,MAAP;KApGO;YAAA,oBAsGF2C,MAtGE,EAsGK;YACRC,MAAOD,OAAOE,OAAP,CAAe,SAAf,EAAyB,EAAzB,EAA6BA,OAA7B,CAAqC,GAArC,EAAyC,EAAzC,CAAD,CAA+CC,KAA/C,CAAqD,GAArD,CAAV;YACIC,MAAMH,IAAI,CAAJ,CAAV;YACII,MAAMJ,IAAI,CAAJ,CADV;YAEIK,MAAMD,MAAMD,GAFhB;YAGIlC,SAAS5B,KAAKiE,IAAL,CAAWD,GAAX,IAAmB,GAAnB,GAAyBhE,KAAKa,EAH3C;YAIIc,QAAQmC,MAAQ9D,KAAK8D,GAAL,CAAU9D,KAAKa,EAAL,GAAU,GAAV,GAAgBe,MAA1B,CAJpB;YAKIsC,cALJ;gBAMQ;eACFC,SAASR,IAAI,CAAJ,CAAT,CADE;eAEFQ,SAASR,IAAI,CAAJ,CAAT,CAFE;wBAAA;;SAAR;eAMOO,KAAP;;CApHR;;;;;;ICAqBE;wBACLtD,EAAZ,EAAgB;;;aACPuD,QAAL,GAAgB,EAAhB;aACKvD,EAAL,GAAUA,EAAV;;;;;4BAEAwD,SAAQ;iBACHD,QAAL,CAAcE,IAAd,CAAmBD,OAAnB;mBACO,IAAP;;;;4BAEAA,SAAQ;;;gBACL,CAACA,OAAJ,EAAY;qBACHD,QAAL,GAAgB,EAAhB;aADJ,MAEK;qBACIA,QAAL,CAAcG,OAAd,CAAsB,UAAC9C,KAAD,EAAOsB,KAAP,EAAe;wBAC9BtB,UAAU4C,OAAb,EAAqB;8BACZD,QAAL,CAAcI,MAAd,CAAqBzB,KAArB,EAA2B,CAA3B;;iBAFR;;mBAMG,IAAP;;;;+BAEE;;;;gBACC,CAAC,KAAKqB,QAAN,IAAkB,CAAC,KAAKA,QAAL,CAAcK,MAAf,KAA0B,CAA/C,EAAiD;iBAC5CL,QAAL,CAAcG,OAAd,CAAsB,mBAAS;oBACxB,OAAOF,OAAP,KAAmB,UAAtB,EAAkCA,QAAQK,KAAR,CAAc,OAAK7D,EAAnB;aADtC;mBAGO,IAAP;;;;;;;;;;;AC1BR,AACA,AAEA,IAAM8D,QAAQ,CACV,YADU,EAEV,WAFU,EAGV,UAHU,EAIV,MAJU,EAKV,WALU,EAMV,SANU,EAOV,OAPU,EAQV,YARU,EASV,UATU,EAUV,QAVU,EAWV,aAXU,EAYV,UAZU,CAAd;;AAeA,IAAMC,cAAc,CAChB,YADgB,EAEhB,WAFgB,EAGhB,UAHgB,EAIhB,aAJgB,CAApB;;IAOqBC;oBACLC,OAAZ,EAAqB;;;aACZC,GAAL,GAAW;;sBAEG,IAFH;sBAGG,IAHH;;;sBAAA,wBAMM,EANN;qBAAA,uBAOK,EAPL;oBAAA,sBAQI,EARJ;gBAAA,kBAUA,EAVA;qBAAA,uBAWK,EAXL;mBAAA,qBAYG,EAZH;iBAAA,mBAcC,EAdD;sBAAA,wBAeM,EAfN;oBAAA,sBAgBI,EAhBJ;kBAAA,oBAkBE,EAlBF;uBAAA,yBAmBO,EAnBP;oBAAA,sBAoBI,EApBJ;;;yBAsBK;qBAAA,mBACD,EADC;qBAAA,mBAED,EAFC;mBAAA,iBAGH,EAHG;;0BAIC;aA1BN;;0BA6BM;qBAAA,mBACF,EADE;sBAAA,oBAED,EAFC;mBAAA,iBAGJ,EAHI;;0BAIA;;SAjCjB;;;aAsCKC,GAAL,GAAW;kBACD,CAAC,CAACF,QAAQG,IAAV,IAAkB,CAAC,CAACH,QAAQI,SAA5B,IAAyC,CAAC,CAACJ,QAAQK,OADlD;mBAEA,CAAC,CAACL,QAAQM,KAAV,IAAmB,CAAC,CAACN,QAAQO,UAA7B,IAA2C,CAAC,CAACP,QAAQQ,QAFrD;oBAGC,CAAC,CAACR,QAAQnD,MAAV,IAAoB,CAAC,CAACmD,QAAQS,WAA9B,IAA6C,CAAC,CAACT,QAAQU,SAHxD;yBAIM,CAAC,CAACV,QAAQW,WAAV,IAAyB,CAAC,CAACX,QAAQW,WAAR,CAAoBC,QAJrD;0BAKO,CAAC,CAACZ,QAAQa,YAAV,IAA0B,CAAC,CAACb,QAAQa,YAAR,CAAqBD;SALnE;;aAQKX,GAAL,GAAWa,EAAEjD,MAAF,CAAS,KAAKoC,GAAd,EAAmBD,OAAnB,CAAX;;;YAGG,CAAC,KAAKC,GAAL,CAASc,QAAV,IAAsB,OAAO,KAAKd,GAAL,CAASc,QAAhB,KAA6B,QAAtD,EAA+D;oBACnD/F,KAAR,CAAc,kDAAd;;;;aAIC+F,QAAL,GAAgBjE,SAASC,aAAT,CAAuB,KAAKkD,GAAL,CAASc,QAAhC,CAAhB;;;YAGI,KAAKd,GAAL,CAASe,QAAb,EAAuB;gBAChB,OAAO,KAAKf,GAAL,CAASe,QAAhB,KAA6B,QAAhC,EAAyC;wBAC7BhG,KAAR,CAAc,uDAAd;;;iBAGCgG,QAAL,GAAgBlE,SAASC,aAAT,CAAuB,KAAKkD,GAAL,CAASe,QAAhC,CAAhB;SALJ,MAMO;iBACEA,QAAL,GAAgB,KAAKD,QAArB;;;;aAKCE,OAAL,GAAe,CAAf;;aAEKC,OAAL,GAAe,KAAKC,QAAL,GAAgB,KAAKC,QAAL,GAAgB,KAAKC,cAAL,GAAsB,KAAKC,cAAL,GAAsB,KAA3F;;aAEKC,UAAL,GAAkB,CAAlB;aACKC,UAAL,GAAkB,EAAlB;aACKC,WAAL,GAAmB,EAAnB;aACKC,gBAAL,GAAwB,IAAxB;aACKC,sBAAL,GAA8B,IAA9B;aACKC,OAAL,GAAe,EAAf;aACKC,eAAL,GAAuB,EAAvB;;aAEKC,QAAL;aACKC,IAAL;;;;;mCAEO;;;kBACDtC,OAAN,CAAc,qBAAa;sBAClBuC,SAAL,IAAkB,IAAI3C,UAAJ,CAAe,MAAK0B,QAApB,EAA8BkB,GAA9B,CAAkC,MAAKhC,GAAL,CAAS+B,SAAT,KAAuB,YAAU,EAAnE,CAAlB;aADJ;iBAGKE,gBAAL,GAAwB,IAAI7C,UAAJ,CAAe,KAAK0B,QAApB,EAA8BkB,GAA9B,CAAkC,KAAKhC,GAAL,CAASU,WAAT,CAAqBwB,KAArB,IAA8B,YAAU,EAA1E,CAAxB;iBACKxB,WAAL,GAAmB,IAAItB,UAAJ,CAAe,KAAK0B,QAApB,EAA8BkB,GAA9B,CAAkC,KAAKhC,GAAL,CAASU,WAAT,CAAqBL,KAArB,IAA8B,YAAU,EAA1E,CAAnB;iBACK8B,cAAL,GAAsB,IAAI/C,UAAJ,CAAe,KAAK0B,QAApB,EAA8BkB,GAA9B,CAAkC,KAAKhC,GAAL,CAASU,WAAT,CAAqB0B,GAArB,IAA4B,YAAU,EAAxE,CAAtB;iBACKC,iBAAL,GAAyB,IAAIjD,UAAJ,CAAe,KAAK0B,QAApB,EAA8BkB,GAA9B,CAAkC,KAAKhC,GAAL,CAASY,YAAT,CAAsBsB,KAAtB,IAA+B,YAAU,EAA3E,CAAzB;iBACKtB,YAAL,GAAoB,IAAIxB,UAAJ,CAAe,KAAK0B,QAApB,EAA8BkB,GAA9B,CAAkC,KAAKhC,GAAL,CAASY,YAAT,CAAsBhE,MAAtB,IAAgC,YAAU,EAA5E,CAApB;iBACK0F,cAAL,GAAsB,IAAIlD,UAAJ,CAAe,KAAK0B,QAApB,EAA8BkB,GAA9B,CAAkC,KAAKhC,GAAL,CAASY,YAAT,CAAsBwB,GAAtB,IAA6B,YAAU,EAAzE,CAAtB;;;;+BAEG;;;wBACS5C,OAAZ,CAAoB,kBAAU;oBACtB+C,KAAKC,UAAU,aAAV,GAAyB,KAAzB,GAAgCA,OAAO5D,OAAP,CAAe,OAAf,EAAwB,EAAxB,CAAzC;;uBAEK2D,KAAG,MAAR,IAAkB,OAAKA,EAAL,EAAST,IAAT,QAAlB;uBACKhB,QAAL,CAAc2B,gBAAd,CAA+BD,MAA/B,EAAuC,OAAKD,KAAG,MAAR,CAAvC,EAAwD,KAAxD;aAJJ;;;;kCAOK;;;wBACO/C,OAAZ,CAAoB,kBAAU;oBACtB+C,KAAKC,UAAU,aAAV,GAAyB,KAAzB,GAAgCA,OAAO5D,OAAP,CAAe,OAAf,EAAwB,EAAxB,CAAzC;uBACKkC,QAAL,CAAc4B,mBAAd,CAAkCF,MAAlC,EAA0C,OAAKD,KAAG,MAAR,CAA1C,EAA2D,KAA3D;aAFJ;;;;8BAKExE,IAAI;gBACF,CAACA,GAAGE,OAAJ,IAAeF,GAAG4E,IAAH,KAAY,YAA/B,EAA4C;;iBAEvC3B,OAAL,GAAejD,GAAGE,OAAH,CAAWyB,MAA1B;iBACK6B,UAAL,GAAkBV,EAAE+B,QAAF,CAAW7E,EAAX,EAAe,CAAf,CAAlB;iBACK6D,eAAL,GAAuBf,EAAEgC,YAAF,CAAe,KAAK9B,QAApB,CAAvB;;gBAEI,KAAKC,OAAL,GAAe,CAAnB,EAAsB;qBACbQ,WAAL,GAAmBX,EAAE+B,QAAF,CAAW7E,EAAX,EAAe,CAAf,CAAnB;qBACK4D,OAAL,GAAed,EAAEiC,SAAF,CAAY,KAAKtB,WAAjB,EAA8B,KAAKD,UAAnC,CAAf;qBACKE,gBAAL,GAAwBZ,EAAEtF,SAAF,CAAY,KAAKoG,OAAjB,CAAxB;aAHJ,MAIO,IAAI,KAAK1B,GAAL,CAASS,WAAb,EAA0B;oBACzBqC,UAAUlC,EAAEiC,SAAF,CAAY,KAAKvB,UAAjB,EAA6B,KAAKK,eAAlC,CAAd;qBACKF,sBAAL,GAA8Bb,EAAEtF,SAAF,CAAYwH,OAAZ,CAA9B;;;iBAGCC,UAAL,CAAgBC,IAAhB,CAAqB;wBACRlF,EADQ;2BAEP;aAFd;;;;6BAKCA,IAAI;gBACD,CAACA,GAAGE,OAAJ,IAAeF,GAAG4E,IAAH,KAAY,WAA/B,EAA2C;gBACvCO,WAAWrC,EAAE+B,QAAF,CAAW7E,EAAX,EAAe,CAAf,CAAf;gBACIoF,aAAapF,GAAGE,OAAH,CAAWyB,MAA5B;gBACI0D,iBAAJ;gBACIC,iBADJ;gBAEIC,gBAFJ;gBAGIC,oBAHJ;gBAIIC,0BAJJ;;;;gBAQIL,aAAa,KAAKnC,OAAtB,EAA+B;qBACtBO,UAAL,GAAkB2B,QAAlB;qBACKlC,OAAL,GAAemC,UAAf;;;;;;gBAMAA,aAAa,CAAb,KAAmB,CAAC,KAAK3B,WAAN,IAAqB,CAAC,KAAKG,OAA3B,IAAsC,CAAC,KAAKF,gBAA/D,CAAJ,EAAsF;qBAC7ED,WAAL,GAAmBX,EAAE+B,QAAF,CAAW7E,EAAX,EAAe,CAAf,CAAnB;qBACK4D,OAAL,GAAed,EAAEiC,SAAF,CAAY,KAAKtB,WAAjB,EAA8B,KAAKD,UAAnC,CAAf;qBACKE,gBAAL,GAAwBZ,EAAEtF,SAAF,CAAY,KAAKoG,OAAjB,CAAxB;;;;gBAIAwB,aAAa,CAAjB,EAAoB;oBACZM,cAAc5C,EAAE+B,QAAF,CAAW7E,EAAX,EAAe,CAAf,CAAlB;oBACI2F,UAAU7C,EAAEiC,SAAF,CAAYW,WAAZ,EAAyBP,QAAzB,CAAd;;oBAEI,KAAKjD,GAAL,CAASI,KAAb,EAAoB;kCACFQ,EAAEtF,SAAF,CAAYmI,OAAZ,CAAd;yBACKC,SAAL,CAAe,OAAf,EAAwB;+BACd;mCACKJ,cAAc,KAAK9B;yBAFV;gCAIb1D;qBAJX;yBAMK0D,gBAAL,GAAwB8B,WAAxB;;;oBAGA,KAAKtD,GAAL,CAASrD,MAAb,EAAqB;yBACZ+G,SAAL,CAAe,QAAf,EAAyB;+BACf;oCACM9C,EAAE+C,QAAF,CAAW,KAAKjC,OAAhB,EAAyB+B,OAAzB;yBAFS;gCAId3F;qBAJX;yBAMK4D,OAAL,GAAe+B,OAAf;;aAtBR,MAwBO;;oBAEC,KAAKzD,GAAL,CAASS,WAAT,IAAwB3C,GAAG8F,MAAH,CAAUC,EAAV,IAAgB,KAAK9D,GAAL,CAASU,WAAT,CAAqBC,QAAjE,EAA2E;8BAC7DE,EAAEiC,SAAF,CAAYI,QAAZ,EAAsB,KAAKtB,eAA3B,CAAV;wCACoBf,EAAEtF,SAAF,CAAY+H,OAAZ,CAApB;yBACKK,SAAL,CAAe,aAAf,EAA8B;+BACpB;mCACKH,oBAAoB,KAAK9B;yBAFV;gCAInB3D;qBAJX;yBAMK2D,sBAAL,GAA8B8B,iBAA9B;;;oBAGA,KAAKvD,GAAL,CAASW,YAAT,IAAyB7C,GAAG8F,MAAH,CAAUC,EAAV,IAAgB,KAAK9D,GAAL,CAASY,YAAT,CAAsBD,QAAnE,EAA6E;+BAC9DE,EAAEiC,SAAF,CAAY,KAAKvB,UAAjB,EAA6B,KAAKK,eAAlC,CAAX;+BACWf,EAAEiC,SAAF,CAAYI,QAAZ,EAAsB,KAAKtB,eAA3B,CAAX;yBACK+B,SAAL,CAAe,cAAf,EAA+B;+BACrB;oCACM9C,EAAE+C,QAAF,CAAWR,QAAX,EAAqBC,QAArB;yBAFe;gCAIpBtF;qBAJX;;;gBAQJ,KAAKkC,GAAL,CAASC,IAAb,EAAmB;oBACXnC,GAAG8F,MAAH,CAAUC,EAAV,KAAiB,KAAK9D,GAAL,CAASU,WAAT,CAAqBC,QAAtC,IAAkD5C,GAAG8F,MAAH,CAAUC,EAAV,KAAiB,KAAK9D,GAAL,CAASY,YAAT,CAAsBD,QAA7F,EAAuG;yBAC9FgD,SAAL,CAAe,MAAf,EAAuB;+BACb;oCACMT,SAAShI,CAAT,GAAa,KAAKqG,UAAL,CAAgBrG,CADnC;oCAEMgI,SAAS/H,CAAT,GAAa,KAAKoG,UAAL,CAAgBpG;yBAHtB;gCAKZ4C;qBALX;;;iBASHwD,UAAL,GAAkB2B,QAAlB;iBACKa,SAAL,CAAed,IAAf,CAAoB;2BACN,WADM;wBAETlF;aAFX;eAIGiG,cAAH;;;;4BAEAjG,IAAI;;;gBACA,CAACA,GAAGE,OAAJ,IAAeF,GAAG4E,IAAH,KAAY,UAA3B,IAAyC5E,GAAG4E,IAAH,KAAY,aAAzD,EACI;;aAEH,OAAD,EAAU,MAAV,EAAkB,QAAlB,EAA4B,cAA5B,EAA4C,aAA5C,EAA2DnD,OAA3D,CAAmE,kBAAU;uBACpEyE,QAAL,CAAczB,MAAd,EAAsB;4BACXzE;iBADX;aADJ;iBAKKmG,QAAL,CAAcjB,IAAd,CAAmB;2BACL,UADK;wBAERlF;aAFX;;;;kCAKMyE,QAAQzE,IAAI;gBACdoG,MAAS3B,MAAT,QAAJ;gBACIN,QAAWM,MAAX,UAAJ;gBACI,CAAC,KAAK2B,GAAL,CAAL,EAAgB;mBACTC,SAAH,GAAelC,KAAf;qBACKA,KAAL,EAAYe,IAAZ,CAAiBlF,EAAjB;qBACKoG,GAAL,IAAY,IAAZ;aAHJ,MAIO;mBACAC,SAAH,GAAe5B,MAAf;qBACKA,MAAL,EAAaS,IAAb,CAAkBlF,EAAlB;;;;;iCAGCyE,QAAQzE,IAAI;gBACboG,MAAS3B,MAAT,QAAJ;gBACIJ,YAAJ;gBACII,UAAU,QAAV,IAAsBA,UAAU,cAApC,EAAoD;sBACvCA,MAAT;aADJ,MAEO;sBACMA,MAAT;;gBAEA,KAAK2B,GAAL,CAAJ,EAAe;mBACRC,SAAH,GAAehC,GAAf;qBACKA,GAAL,EAAUa,IAAV,CAAelF,EAAf;qBACKoG,GAAL,IAAY,KAAZ;;;;;uCAGOrI,IAAI;iBACViF,QAAL,GAAgBjF,EAAhB;;;;2BAED0G,QAAQlD,SAAS;iBACXkD,MAAL,KAAgB,KAAKA,MAAL,EAAaR,GAAb,CAAiB1C,OAAjB,CAAhB;;;;4BAEAkD,QAAQlD,SAAS;iBACZkD,MAAL,KAAgB,KAAKA,MAAL,EAAa6B,GAAb,CAAiB/E,OAAjB,CAAhB;;;;;;;ACxSRnC,OAAOmH,gBAAP,GAA2B,YAAW;WAC3BnH,OAAOoH,qBAAP,IAAgCpH,OAAOqH,2BAAvC,IAAsE,UAASC,QAAT,EAAmB;eACrFC,UAAP,CAAkBD,QAAlB,EAA4B,OAAO,EAAnC;KADJ;CADsB,EAA1B;;;AAOA,IAAIE,YAAY;OACV,CADU;OAEV,CAFU;WAGN,CAHM;YAIL;CAJX;AAMA,IAAIC,QAAQC,EAAE,aAAF,CAAZ;AACA,IAAIC,OAAOjI,SAASC,aAAT,CAAuB,UAAvB,CAAX;AACA,IAAIiI,WAAWD,KAAK5I,qBAAL,EAAf;AACA,IAAI8I,SAASJ,MAAM,CAAN,EAAS1I,qBAAT,EAAb;AACA,IAAI4D,MAAJ,CAAW;cACE,aADF;QAAA,gBAEF/B,EAFE,EAEC;kBACM7C,CAAV,IAAe6C,GAAGkH,KAAH,CAASC,MAAxB;kBACU/J,CAAV,IAAe4C,GAAGkH,KAAH,CAASE,MAAxB;YACIP,KAAJ,EAAUQ,MAAMN,IAAN,EAAWF,MAAM,CAAN,CAAX,EAAoBD,SAApB,CAAV;;CALR;AAQA,SAASS,KAAT,CAAeN,IAAf,EAAoBhJ,EAApB,EAAuBoD,KAAvB,EAA6B;QACrBmG,SAAS,EAAb;QACIC,OAAO,CAAExJ,GAAGyJ,UAAL,GAAkBF,MAA7B;QACIG,OAAQT,SAAS5I,KAAT,GAAiBL,GAAGyJ,UAApB,GAAiCP,OAAO7I,KAAxC,GAAgDkJ,MAA5D;QACII,OAAO,CAAE3J,GAAG4J,SAAL,GAAiBL,MAA5B;QACIM,OAAQZ,SAASa,MAAT,GAAkB9J,GAAG4J,SAArB,GAAiCV,OAAOY,MAAxC,GAAiDP,MAA7D;UACMnK,CAAN,GAAUgE,MAAMhE,CAAN,GAAUoK,IAAV,GAAiBA,IAAjB,GAAwBpG,MAAMhE,CAAxC;UACMA,CAAN,GAAUgE,MAAMhE,CAAN,GAAUsK,IAAV,GAAiBA,IAAjB,GAAwBtG,MAAMhE,CAAxC;UACMC,CAAN,GAAU+D,MAAM/D,CAAN,GAAUsK,IAAV,GAAiBA,IAAjB,GAAwBvG,MAAM/D,CAAxC;UACMA,CAAN,GAAU+D,MAAM/D,CAAN,GAAUwK,IAAV,GAAiBA,IAAjB,GAAwBzG,MAAM/D,CAAxC;WACO+D,KAAP;;;;AAIJ,IAAI2G,aAAa;OACX,CADW;OAEX,CAFW;WAGP,CAHO;YAIN;CAJX;AAMA,IAAIC,SAASjB,EAAE,cAAF,CAAb;AACA,IAAI/E,MAAJ,CAAW;cACE,cADF;SAAA,iBAED/B,EAFC,EAEE;mBACMpB,KAAX,IAAoBoB,GAAGkH,KAAH,CAAStI,KAA7B;YACImJ,MAAJ,EAAWD,UAAX;;CAJR;;;AASA,IAAIE,cAAc;OACZ,CADY;OAEZ,CAFY;WAGR,CAHQ;YAIP;CAJX;AAMA,IAAIC,UAAUnB,EAAE,eAAF,CAAd;AACA,IAAI/E,MAAJ,CAAW;cACE,eADF;UAAA,kBAEA/B,EAFA,EAEG;oBACMnB,MAAZ,IAAsBmB,GAAGkH,KAAH,CAASrI,MAA/B;YACIoJ,OAAJ,EAAYD,WAAZ;;CAJR;;;AASA,IAAIE,mBAAmB;OACjB,CADiB;OAEjB,CAFiB;WAGb,CAHa;YAIZ;CAJX;AAMA,IAAIC,eAAerB,EAAE,oBAAF,CAAnB;AACA,IAAI/E,MAAJ,CAAW;cACE,oBADF;iBAEK;aAAA,iBACF/B,EADE,EACC;6BACYpB,KAAjB,IAA0BoB,GAAGkH,KAAH,CAAStI,KAAnC;gBACIuJ,YAAJ,EAAiBD,gBAAjB;SAHI;;kBAKC;;CAPjB;;;AAYA,IAAIE,oBAAoB;OAClB,CADkB;OAElB,CAFkB;WAGd,CAHc;YAIb;CAJX;AAMA,IAAIC,gBAAgBvB,EAAE,qBAAF,CAApB;AACA,IAAI/E,MAAJ,CAAW;cACE,qBADF;kBAEM;cAAA,kBACF/B,EADE,EACC;8BACYnB,MAAlB,IAA4BmB,GAAGkH,KAAH,CAASrI,MAArC;gBACIwJ,aAAJ,EAAkBD,iBAAlB;SAHK;;kBAKA;;CAPjB;;AAWA,SAASE,GAAT,CAAaC,GAAb,EAAiBhK,SAAjB,EAA2B;WAChBgI,gBAAP,CAAwB,YAAI;YACpBiC,GAAJ,CAAQ,WAAR,mBAAmCjK,UAAUpB,CAA7C,WAAoDoB,UAAUnB,CAA9D,uBAAiFmB,UAAUM,MAA3F,mBAA+GN,UAAUK,KAAzH;KADJ;"}