!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.up=e():t.up=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var s=n[i]={exports:{},id:i,loaded:!1};return t[i].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(4)},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){function t(e){n(this,t),this.handlers=[],this.el=e}return i(t,[{key:"add",value:function(t){return this.handlers.push(t),this}},{key:"del",value:function(t){var e=this;return t?this.handlers.forEach(function(n,i){n===t&&e.handlers.splice(i,1)}):this.handlers=[],this}},{key:"fire",value:function(){var t=this,e=arguments;if(this.handlers&&0!==!this.handlers.length)return this.handlers.forEach(function(n){"function"==typeof n&&n.apply(t.el,e)}),this}}]),t}();e.default=s},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(3),a=i(o),h=n(1),u=i(h);window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();var c=["touchstart","touchmove","touchend","drag","dragstart","dragend","pinch","pinchstart","pinchend","rotate","rotatestart","rotatend","singlePinch","singlePinchstart","singlePinchend","singleRotate","singleRotatestart","singleRotatend"],l=function(){function t(e){s(this,t),this.ops={receiver:null,operator:null,delegation:!1,limit:null,transform:{x:0,y:0,scale:1,rotate:0},touchstart:function(){},touchmove:function(){},touchend:function(){},drag:function(){},dragstart:function(){},dragend:function(){},pinch:function(){},pinchstart:function(){},pinchend:function(){},rotate:function(){},rotatestart:function(){},rotatene:function(){},singlePinch:function(){},singlePinchstart:function(){},singlePinchend:function(){},singlePinchId:null,singleRotate:function(){},singleRotatestart:function(){},singleRotatend:function(){},singleRotateId:null},this.ops=a.default.extend(this.ops,e),this.transform=this.ops.transform,this.use={drag:!!e.drag,pinch:!!e.pinch,rotate:!!e.rotate,singlePinch:!!e.singlePinch&&!!e.singlePinchId,singleRotate:!!e.singleRotate&&!!e.singleRotateId},this.receiver="string"==typeof this.ops.receiver?document.querySelector(this.ops.receiver):this.ops.receiver,this.receiverStatus=this.receiver.getBoundingClientRect(),this.ops.operator?(this.ops.delegation=!0,this.operator=document.querySelector(this.ops.operator),this.operatorStatus=this.operator.getBoundingClientRect()):(this.ops.delegation=!1,this.operator=this.receiver,this.operatorStatus=this.receiverStatus),this.event={origin:null,transform:this.transform,eventType:"",delta:{},setTransform:this.setTransform.bind(this)},this.fingers=0,this.draging=this.pinching=this.rotating=this.singleRotating=this.singlePinching=!1,this.startScale=1,this.startPoint={},this.secondPoint={},this.pinchStartLength=null,this.singlePinchStartLength=null,this.vertor1={},this.singleBasePoint={},this.driveBus(),this.bind()}return r(t,[{key:"driveBus",value:function(){var t=this,e=function(){};c.forEach(function(n){t[n]=new u.default(t.receiver).add(t.ops[n]||e)})}},{key:"bind",value:function(){var t=this;["touchstart","touchmove","touchend","touchcancel"].forEach(function(e){var n="touchcancel"==e?"end":e.replace("touch","");t.receiver.addEventListener(e,t[n].bind(t),!1)})}},{key:"start",value:function(t){if(t.touches&&"touchstart"===t.type){if(this.fingers=t.touches.length,this.startPoint=a.default.getPoint(t,0),this.singleBasePoint=a.default.getBasePoint(this.operator),this.transform=a.default.getPos(this.operator),this.fingers>1)this.secondPoint=a.default.getPoint(t,1),this.vertor1=a.default.getVertor(this.secondPoint,this.startPoint),this.pinchStartLength=a.default.getLength(this.vertor1);else if(this.use.singlePinch){var e=a.default.getVertor(this.startPoint,this.singleBasePoint);this.singlePinchStartLength=a.default.getLength(e)}this.event.origin=t,this.event.eventType="touchstart",this.touchstart.fire(this.event)}}},{key:"move",value:function(t){if(t.touches&&"touchmove"===t.type){var e=a.default.getPoint(t,0),n=t.touches.length,i=void 0,s=void 0,r=void 0,o=void 0,h=void 0;if(this.event.origin=t,n<this.fingers)return this.startPoint=e,void(this.fingers=n);if(!(n>1)||this.secondPoint&&this.vertor1&&this.pinchStartLength||(this.secondPoint=a.default.getPoint(t,1),this.vertor1=a.default.getVertor(this.secondPoint,this.startPoint),this.pinchStartLength=a.default.getLength(this.vertor1)),n>1){var u=a.default.getPoint(t,1),c=a.default.getVertor(u,e);this.use.pinch&&(o=a.default.getLength(c),this.event.delta={scale:o/this.pinchStartLength},this.transform.scale*=this.event.delta.scale,this.event.transform=this.transform,this.pinchStartLength=o,this.eventFire("pinch",this.event)),this.use.rotate&&(this.event.delta={rotate:a.default.getAngle(this.vertor1,c)},this.transform.rotate+=this.event.delta.rotate,this.event.transform=this.transform,this.vertor1=c,this.eventFire("rotate",this.event))}else this.use.singlePinch&&t.target.id==this.ops.singlePinchId&&(r=a.default.getVertor(e,this.singleBasePoint),h=a.default.getLength(r),this.event.delta={scale:h/this.singlePinchStartLength},this.transform.scale*=this.event.delta.scale,this.event.transform=this.transform,this.singlePinchStartLength=h,this.eventFire("singlePinch",this.event)),this.use.singleRotate&&t.target.id==this.ops.singleRotateId&&(i=a.default.getVertor(this.startPoint,this.singleBasePoint),s=a.default.getVertor(e,this.singleBasePoint),this.event.delta={rotate:a.default.getAngle(i,s)},this.transform.rotate+=this.event.delta.rotate,this.event.transform=this.transform,this.eventFire("singleRotate",this.event));this.use.drag&&t.target.id!==this.ops.singlePinchId&&t.target.id!==this.ops.singleRotateId&&(this.event.delta={deltaX:e.x-this.startPoint.x,deltaY:e.y-this.startPoint.y},this.transform.x+=this.event.delta.deltaX,this.transform.y+=this.event.delta.deltaY,this.event.transform=this.transform,this.eventFire("drag",this.event)),this.startPoint=e,this.event.eventType="touchmove",this.touchmove.fire(this.event),t.preventDefault()}}},{key:"end",value:function(t){var e=this;(t.touches||"touchend"===t.type||"touchcancel"===t.type)&&(this.event.origin=t,["pinch","drag","rotate","singleRotate","singlePinch"].forEach(function(t){e.eventEnd(t,e.event)}),this.event.eventType="touchend",this.touchend.fire(this.event))}},{key:"eventFire",value:function(t,e){var n=t+"ing",i=t+"start";this[n]?(e.eventType=t,this[t].fire(e)):(e.eventType=i,this[i].fire(e),this[n]=!0)}},{key:"eventEnd",value:function(t,e){var n=t+"ing",i=void 0;i="rotate"==t||"singleRotate"==t?t+"nd":t+"end",this[n]&&(e.eventType=i,this[i].fire(e),this[n]=!1)}},{key:"setTransform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.operator,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.transform,n=JSON.parse(JSON.stringify(e));this.ops.limit&&this.ops.delegation&&"drag"==this.event.eventType&&(n=this.limitOperator(n)),a.default.setPos(t,this.limitOperator(n))}},{key:"limitOperator",value:function(t){var e=this.operator.getBoundingClientRect(),n=this.operatorStatus.width*(t.scale-1)/2,i=this.operatorStatus.height*(t.scale-1)/2,s=e.width*this.ops.limit.x,r=e.height*this.ops.limit.y,o=n-s,a=i-r,h=this.receiverStatus.width-e.width+n+s,u=this.receiverStatus.height-e.height+i+r,c=this.ops.limit,l=c.minScale,d=c.maxScale;return(this.ops.limit.x||0==this.ops.limit.x)&&(t.x>=h&&(t.x=h),t.x<o&&(t.x=o)),(this.ops.limit.y||0==this.ops.limit.y)&&(t.y>u&&(t.y=u),t.y<a&&(t.y=a)),this.ops.limit.minScale&&t.scale<l&&(t.scale=l),this.ops.limit.maxScale&&t.scale>d&&(t.scale=d),t}},{key:"switchOperator",value:function(t){this.operator=t}},{key:"on",value:function(t,e){this[t]&&this[t].add(e)}},{key:"off",value:function(t,e){this[t]&&this[t].del(e)}}]),t}();e.default=l,window.MTPlugin||(window.MTPlugin={}),window.MTPlugin.Mtouch=l},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={getLength:function(t){return t?Math.sqrt(t.x*t.x+t.y*t.y):void console.error("getLength error!")},getAngle:function(t,e){if(!t||!e)return void console.error("getAngle error!");var n=t.x*e.y-e.x*t.y;n=n>0?1:-1;var i=Math.sqrt(t.x*t.x+t.y*t.y),s=Math.sqrt(e.x*e.x+e.y*e.y),r=i*s;if(0===r)return 0;var o=t.x*e.x+t.y*e.y,a=o/r;return a>1&&(a=1),a<-1&&(a=-1),Math.acos(a)*n*180/Math.PI},getBasePoint:function(t){if(!t)return void console.error("getBasePoint error!");var e=t.getBoundingClientRect().left+t.getBoundingClientRect().width/2,n=t.getBoundingClientRect().top+t.getBoundingClientRect().width/2;return{x:Math.round(e),y:Math.round(n)}},setPos:function(t,e){var n=JSON.stringify(e),i="translate3d("+e.x+"px,"+e.y+"px,0px) scale("+e.scale+") rotate("+e.rotate+"deg)";t="string"==typeof t?document.querySelector(t):t,t.style.transform=i,t.setAttribute("data-mtouch-status",n)},getPos:function(t){return JSON.parse(t.getAttribute("data-mtouch-status"))||{x:0,y:0,scale:1,rotate:0}},extend:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},getVertor:function(t,e){return t&&e?{x:Math.round(t.x-e.x),y:Math.round(t.y-e.y)}:void console.error("getVertor error!")},getPoint:function(t,e){return t&&t.touches[e]?{x:Math.round(t.touches[e].pageX),y:Math.round(t.touches[e].pageY)}:void console.error("getPoint error!")}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n(6),n(5);var s=n(2),r=i(s);window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();var o=(document.querySelector(".js-el"),document.querySelector(".js-par")),a=new r.default({receiver:".js-par",operator:".js-el",limit:{x:.5,y:.5,minScale:.4},touchstart:function(t){},touchmove:function(t){},touchend:function(t){},dragstart:function(t){},drag:function(t){t.setTransform()},dragend:function(t){},pinchstart:function(t){},pinch:function(t){t.setTransform()},pinchend:function(t){},rotatestart:function(t){},rotate:function(t){t.setTransform()},rotatend:function(t){},singlePinchstart:function(t){},singlePinch:function(t){t.setTransform()},singlePinchend:function(t){},singlePinchId:"js-pinch",singleRotatestart:function(t){},singleRotate:function(t){t.setTransform()},singleRotatend:function(t){},singleRotateId:"js-pinch"});a.setTransform(".el-1",{x:($(o).width()-100)/2,y:($(o).height()-110)/2,scale:1,rotate:0}),$(".js-el").on("tap",function(){$(".js-el").removeClass("active"),$(this).addClass("active"),a.switchOperator(this)})},function(t,e){},function(t,e){t.exports="data:image/png;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICJpbWFnZXMvcGluY2gucG5nIjs="}])});