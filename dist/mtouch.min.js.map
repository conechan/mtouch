{"version":3,"file":"mtouch.min.js","sources":["../src/index.js","../src/utils.js","../src/handlerBus.js"],"sourcesContent":["import _ from './utils';\nimport HandlerBus from './handlerBus';\n\nconst EVENT = [\n    'touchstart',\n    'touchmove',\n    'touchend',\n    'drag',\n    'dragstart',\n    'dragend',\n    'pinch',\n    'pinchstart',\n    'pinchend',\n    'rotate',\n    'rotatestart',\n    'rotatend',\n];\n\nconst ORIGINEVENT = [\n    'touchstart',\n    'touchmove',\n    'touchend',\n    'touchcancel',\n];\n\nexport default function MTouch(config,operator){\n    // 兼容不使用 new 的方式；\n    if(!(this instanceof MTouch))return new MTouch(config,operator);\n\n    let options;\n    // options 多态；\n    if(typeof config === 'string'){\n        options = {};\n        options.receiver = config;\n        if(operator){\n            options.operator = operator;\n        }\n    }else if(typeof config === 'object'){\n        options = config;\n    }\n\n    this.ops = {\n        // config:\n        receiver: null,\n        operator: null,\n\n        // event\n        touchstart() {},\n        touchmove() {},\n        touchend() {},\n\n        drag() {},\n        dragstart() {},\n        dragend() {},\n\n        pinch() {},\n        pinchstart() {},\n        pinchend() {},\n\n        rotate() {},\n        rotatestart() {},\n        rotatend() {},\n\n        singlePinch:{\n            start(){},\n            pinch(){},\n            end(){},\n            buttonId:null,\n        },\n\n        singleRotate:{\n            start(){},\n            rotate(){},\n            end(){},\n            buttonId:null,\n        },\n    };\n\n    // 开关；\n    this.use = {\n        drag: !!options.drag || !!options.dragstart || !!options.dragend,\n        pinch: !!options.pinch || !!options.pinchstart || !!options.pinchend,\n        rotate: !!options.rotate || !!options.rotatestart || !!options.rotateend,\n        singlePinch: !!options.singlePinch && !!options.singlePinch.buttonId,\n        singleRotate: !!options.singleRotate && !!options.singleRotate.buttonId,\n    };\n\n    this.ops = _.extend(this.ops, options);\n\n    // receiver test;\n    if(!this.ops.receiver || typeof this.ops.receiver !== 'string'){\n        console.error('receiver error,there must be a receiver-selector');\n        return;\n    }\n    // 事件接收器；\n    this.receiver = document.querySelector(this.ops.receiver);\n\n    // 事件操纵器；\n    if (this.ops.operator) {\n        if(typeof this.ops.operator !== 'string'){\n            console.error('operator error, the operator param must be a selector');\n            return;\n        }\n        this.operator = document.querySelector(this.ops.operator);\n    } else {\n        this.operator = this.receiver;\n    }\n    // touch状态；\n    this.fingers = 0;\n    // 初始状态;\n    this.draging = this.pinching = this.rotating = this.singleRotating = this.singlePinching = false;\n\n    this.startScale = 1;\n    this.startPoint = {};\n    this.secondPoint = {};\n    this.pinchStartLength = null;\n    this.singlePinchStartLength = null;\n    this.vector1 = {};\n    this.singleBasePoint = {};\n    // eventbus\n    this.driveBus();\n    this.bind();\n}\n\nMTouch.prototype.driveBus = function(){\n    EVENT.forEach(eventName => {\n        this[eventName] = new HandlerBus(this.receiver).add(this.ops[eventName] || function(){});\n    });\n    this.singlePinchstart = new HandlerBus(this.receiver).add(this.ops.singlePinch.start || function(){});\n    this.singlePinch = new HandlerBus(this.receiver).add(this.ops.singlePinch.pinch || function(){});\n    this.singlePinchend = new HandlerBus(this.receiver).add(this.ops.singlePinch.end || function(){});\n    this.singleRotatestart = new HandlerBus(this.receiver).add(this.ops.singleRotate.start || function(){});\n    this.singleRotate = new HandlerBus(this.receiver).add(this.ops.singleRotate.rotate || function(){});\n    this.singleRotatend = new HandlerBus(this.receiver).add(this.ops.singleRotate.end || function(){});\n};\n\nMTouch.prototype.bind = function() {\n    ORIGINEVENT.forEach(evName => {\n        let fn = evName == 'touchcancel'? 'end': evName.replace('touch', '');\n        // 需要存下 bind(this) 后的函数指向，用于 destroy;\n        this[fn+'bind'] = this[fn].bind(this);\n        this.receiver.addEventListener(evName, this[fn+'bind'], false);\n    });\n};\nMTouch.prototype.destroy = function(){\n    ORIGINEVENT.forEach(evName => {\n        let fn = evName == 'touchcancel'? 'end': evName.replace('touch', '');\n        this.receiver.removeEventListener(evName, this[fn+'bind'], false);\n    });\n};\nMTouch.prototype.start = function(ev) {\n    if (!ev.touches || ev.type !== 'touchstart')return;\n\n    this.fingers = ev.touches.length;\n    this.startPoint = _.getPoint(ev, 0);\n    this.singleBasePoint = _.getBasePoint(this.operator);\n\n    if (this.fingers > 1) {\n        this.secondPoint = _.getPoint(ev, 1);\n        this.vector1 = _.getVector(this.secondPoint, this.startPoint);\n        this.pinchStartLength = _.getLength(this.vector1);\n    } else if (this.use.singlePinch) {\n        let pinchV1 = _.getVector(this.startPoint, this.singleBasePoint);\n        this.singlePinchStartLength = _.getLength(pinchV1);\n    }\n\n    this.touchstart.fire({\n        origin : ev,\n        eventType:'touchstart',\n    });\n};\nMTouch.prototype.move = function(ev) {\n    if (!ev.touches || ev.type !== 'touchmove')return;\n    let curPoint = _.getPoint(ev, 0);\n    let curFingers = ev.touches.length;\n    let rotateV1,\n        rotateV2,\n        pinchV2,\n        pinchLength,\n        singlePinchLength;\n\n    // 当从原先的两指到一指的时候，可能会出现基础手指的变化，导致跳动；\n    // 因此需屏蔽掉一次错误的touchmove事件，待重新设置基础指后，再继续进行；\n    if (curFingers < this.fingers) {\n        this.startPoint = curPoint;\n        this.fingers = curFingers;\n        return;\n    }\n\n    // 两指先后触摸时，只会触发第一指一次touchstart，第二指不会再次触发touchstart；\n    // 因此会出现没有记录第二指状态，需要在touchmove中重新获取参数；\n    if (curFingers > 1 && (!this.secondPoint || !this.vector1 || !this.pinchStartLength)) {\n        this.secondPoint = _.getPoint(ev, 1);\n        this.vector1 = _.getVector(this.secondPoint, this.startPoint);\n        this.pinchStartLength = _.getLength(this.vector1);\n    }\n\n    // 双指时，需触发pinch和rotate事件；\n    if (curFingers > 1) {\n        let curSecPoint = _.getPoint(ev, 1);\n        let vector2 = _.getVector(curSecPoint, curPoint);\n        // pinch\n        if (this.use.pinch) {\n            pinchLength = _.getLength(vector2);\n            this.eventFire('pinch', {\n                delta:{\n                    scale: pinchLength / this.pinchStartLength,\n                },\n                origin:ev,\n            });\n            this.pinchStartLength = pinchLength;\n        }\n        // rotate\n        if (this.use.rotate) {\n            this.eventFire('rotate', {\n                delta:{\n                    rotate: _.getAngle(this.vector1, vector2),\n                },\n                origin:ev,\n            });\n            this.vector1 = vector2;\n        }\n    } else {\n        // singlePinch;\n        if (this.use.singlePinch && ev.target.id == this.ops.singlePinch.buttonId) {\n            pinchV2 = _.getVector(curPoint, this.singleBasePoint);\n            singlePinchLength = _.getLength(pinchV2);\n            this.eventFire('singlePinch', {\n                delta:{\n                    scale: singlePinchLength / this.singlePinchStartLength,\n                },\n                origin:ev,\n            });\n            this.singlePinchStartLength = singlePinchLength;\n        }\n        // singleRotate;\n        if (this.use.singleRotate && ev.target.id == this.ops.singleRotate.buttonId) {\n            rotateV1 = _.getVector(this.startPoint, this.singleBasePoint);\n            rotateV2 = _.getVector(curPoint, this.singleBasePoint);\n            this.eventFire('singleRotate', {\n                delta:{\n                    rotate: _.getAngle(rotateV1, rotateV2),\n                },\n                origin:ev,\n            });\n        }\n    }\n    if (this.use.drag) {\n        if (ev.target.id !== this.ops.singlePinch.buttonId && ev.target.id !== this.ops.singleRotate.buttonId) {\n            this.eventFire('drag', {\n                delta:{\n                    deltaX: curPoint.x - this.startPoint.x,\n                    deltaY: curPoint.y - this.startPoint.y,\n                },\n                origin:ev,\n            });\n        }\n    }\n    this.startPoint = curPoint;\n    this.touchmove.fire({\n        eventType:'touchmove',\n        origin:ev,\n    });\n    ev.preventDefault();\n};\nMTouch.prototype.end = function(ev) {\n    if (!ev.touches && ev.type !== 'touchend' && ev.type !== 'touchcancel')\n        return;\n\n    ['pinch', 'drag', 'rotate', 'singleRotate', 'singlePinch'].forEach(evName => {\n        this.eventEnd(evName, {\n            origin:ev,\n        });\n    });\n    this.touchend.fire({\n        eventType:'touchend',\n        origin:ev,\n    });\n};\nMTouch.prototype.eventFire = function(evName, ev) {\n    let ing = `${evName}ing`;\n    let start = `${evName}start`;\n    if (!this[ing]) {\n        ev.eventType = start;\n        this[start].fire(ev);\n        this[ing] = true;\n    } else {\n        ev.eventType = evName;\n        this[evName].fire(ev);\n    }\n};\nMTouch.prototype.eventEnd = function(evName, ev) {\n    let ing = `${evName}ing`;\n    let end;\n    if (evName == 'rotate' || evName == 'singleRotate') {\n        end = `${evName}nd`;\n    } else {\n        end = `${evName}end`;\n    }\n    if (this[ing]) {\n        ev.eventType = end;\n        this[end].fire(ev);\n        this[ing] = false;\n    }\n};\nMTouch.prototype.switchOperator = function(el) {\n    this.operator = el;\n};\nMTouch.prototype.on = function(evName, handler) {\n    this.use[ _.getUseName(evName) ] = true;\n    this[evName].add(handler);\n};\nMTouch.prototype.off = function(evName, handler) {\n    this[evName].del(handler);\n};\n","export default {\n    getLength(v1) {\n        if (typeof v1 !== 'object') {\n            console.error('getLength error!');\n            return;\n        }\n        return Math.sqrt(v1.x * v1.x + v1.y * v1.y);\n    },\n    getAngle(v1, v2) {\n        if (typeof v1 !== 'object' || typeof v2 !== 'object') {\n            console.error('getAngle error!');\n            return;\n        }\n        let direction = v1.x * v2.y - v2.x * v1.y > 0 ? 1: -1,\n            len1 = this.getLength(v1),\n            len2 = this.getLength(v2),\n            mr = len1 * len2,\n            dot,r;\n        if (mr === 0)return 0;\n        dot = v1.x * v2.x + v1.y * v2.y;\n        r = dot / mr;\n        if (r > 1)r = 1;\n        if (r < -1)r = -1;\n        return Math.acos(r) * direction * 180 / Math.PI;\n    },\n    getBasePoint(el) {\n        if (!el) {\n            console.error('getBasePoint error!');\n            return;\n        }\n        let offset = this.getOffset(el);\n        let x = offset.left + el.getBoundingClientRect().width / 2,\n            y = offset.top + el.getBoundingClientRect().width / 2;\n        return {x: Math.round(x), y: Math.round(y)};\n    },\n    setPos(el, transform) {\n        let str = JSON.stringify(transform);\n        let value = `translate3d(${transform.x}px,${transform.y}px,0px) scale(${transform.scale}) rotate(${transform.rotate}deg)`;\n        el = typeof el == 'string'? document.querySelector(el): el;\n        el.style.transform = value;\n        el.setAttribute('data-mtouch-status', str);\n    },\n    getPos(el) {\n        let defaulTrans;\n        let cssTrans = window.getComputedStyle(el,null).transform;\n        if(window.getComputedStyle && cssTrans !== 'none'){\n            defaulTrans = this.matrixTo(cssTrans);\n        }else{\n            defaulTrans = {\n                x: 0,\n                y: 0,\n                scale: 1,\n                rotate: 0,\n            };\n        }\n        return JSON.parse(el.getAttribute('data-mtouch-status')) || defaulTrans;\n    },\n    extend(obj1, obj2) {\n        for (let k in obj2) {\n            if (obj2.hasOwnProperty(k)) {\n                if(typeof obj2[k] == 'object'){\n                    if(typeof obj1[k] !== 'object'){\n                        obj1[k] = {};\n                    }\n                    this.extend(obj1[k],obj2[k]);\n                }else{\n                    obj1[k] = obj2[k];\n                }\n            }\n        }\n        return obj1;\n    },\n    getVector(p1, p2) {\n        if (typeof p1 !== 'object' || typeof p2 !== 'object' ) {\n            console.error('getvector error!');\n            return;\n        }\n        let x = Math.round(p1.x - p2.x),\n            y = Math.round(p1.y - p2.y);\n        return { x, y };\n    },\n    getPoint(ev, index) {\n        if (!ev || !ev.touches[index]) {\n            console.error('getPoint error!');\n            return;\n        }\n        return {\n            x: Math.round(ev.touches[index].pageX),\n            y: Math.round(ev.touches[index].pageY),\n        };\n    },\n    getOffset(el){\n        el = typeof el == 'string'? document.querySelector(el): el;\n        let rect = el.getBoundingClientRect();\n        let offset = {\n            left:rect.left + document.body.scrollLeft,\n            top:rect.top + document.body.scrollTop,\n            width:el.offsetWidth,\n            height:el.offsetHeight,\n        };\n        return offset;\n    },\n    matrixTo(matrix){\n        let arr = (matrix.replace('matrix(','').replace(')','')).split(',');\n        let cos = arr[0],\n            sin = arr[1],\n            tan = sin / cos,\n            rotate = Math.atan( tan ) * 180 / Math.PI,\n            scale = cos / ( Math.cos( Math.PI / 180 * rotate )),\n            trans;\n        trans = {\n            x:parseInt(arr[4]),\n            y:parseInt(arr[5]),\n            scale,\n            rotate,\n        };\n        return trans;\n    },\n    getUseName(evName){\n        let useName = evName.replace('start','');\n        let end = useName.indexOf('rotate') !== -1 ? 'nd' : 'end';\n        useName = useName.replace(end,'');\n        return useName;\n    },\n};\n","export default class HandlerBus{\n    constructor(el) {\n        this.handlers = [];\n        this.el = el;\n    }\n    add(handler){\n        this.handlers.push(handler);\n        return this;\n    }\n    del(handler){\n        if(!handler){\n            this.handlers = [];\n        }else{\n            this.handlers.forEach((value,index)=>{\n                if(value === handler){\n                    this.handlers.splice(index,1);\n                }\n            });\n        }\n        return this;\n    }\n    fire(){\n        if(!this.handlers || !this.handlers.length === 0)return;\n        this.handlers.forEach(handler=>{\n            if(typeof handler === 'function') handler.apply(this.el, arguments);\n        });\n        return this;\n    }\n}\n"],"names":["MTouch","config","operator","this","options","receiver","ops","use","drag","dragstart","dragend","pinch","pinchstart","pinchend","rotate","rotatestart","rotateend","singlePinch","buttonId","singleRotate","_","extend","error","document","querySelector","fingers","draging","pinching","rotating","singleRotating","singlePinching","startScale","startPoint","secondPoint","pinchStartLength","singlePinchStartLength","vector1","singleBasePoint","driveBus","bind","v1","Math","sqrt","x","y","v2","direction","len1","getLength","len2","mr","dot","r","acos","PI","el","offset","getOffset","left","getBoundingClientRect","width","top","round","transform","str","JSON","stringify","value","scale","style","setAttribute","defaulTrans","cssTrans","window","getComputedStyle","matrixTo","parse","getAttribute","obj1","obj2","k","hasOwnProperty","_typeof","p1","p2","ev","index","touches","pageX","pageY","rect","body","scrollLeft","scrollTop","offsetWidth","offsetHeight","matrix","arr","replace","split","cos","sin","tan","atan","parseInt","evName","useName","end","indexOf","HandlerBus","handlers","handler","push","forEach","splice","length","apply","_this2","EVENT","ORIGINEVENT","prototype","eventName","_this","add","singlePinchstart","start","singlePinchend","singleRotatestart","singleRotatend","fn","addEventListener","destroy","removeEventListener","_this3","type","getPoint","getBasePoint","getVector","pinchV1","touchstart","fire","move","curPoint","curFingers","rotateV1","rotateV2","pinchV2","pinchLength","singlePinchLength","curSecPoint","vector2","eventFire","getAngle","target","id","touchmove","preventDefault","eventEnd","touchend","ing","eventType","switchOperator","on","getUseName","off","del"],"mappings":"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"}